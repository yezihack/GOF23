# 单例模式

## 作用
单例模式主要是保证一个类有且仅有一个实例类

## 应用
1. 数据库连接池
1. 处理资源访问冲突
1. 表示全局唯一类或初例

## 实现单例方式
1. 饿汉式
1. 懒汉式
1. 双重检测
1. 静态内部类(如php,java语言)
1. 枚举(如java)

## Go 自带单例实现
```go
var single sync.Once

func ReadBook(fn func()) {
	single.Do(func() {
		fn()
	})
}
```

## 单例的不友好
1. 单例对OOP特性支持不友好。
1. 单例会隐藏类之间的依赖关系。
1. 单例对代码的扩展性不友好。
1. 单例对代码的扩展性不友好。
1. 单例不支持有参数的构造函数。(Go语言似乎无效)

## 单例的替代方案
1. 使用静态类。(Go 全局变量)。
1. IOC 依赖注入。

## 单例的唯一性的范围理解
单例类中的对象唯一性作用范围是“进程唯一”
1. 进程唯一，表示进程内及线程内唯一。
1. 进程唯一，不表示进程间唯一。
1. 线程唯一，表示线程内唯一，但进程内不唯一。
1. 集群唯一，表示进程内唯一而且还进程间唯一。